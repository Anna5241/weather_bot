# üå¶Ô∏è –ü–æ–≥–æ–¥–Ω—ã–π –±–æ—Ç –¥–ª—è Telegram

Laravel-–±–æ—Ç –¥–ª—è Telegram, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –∏ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–≥–æ–¥–æ–π.

## üìå –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)  
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫](#–ª–æ–∫–∞–ª—å–Ω—ã–π-–∑–∞–ø—É—Å–∫)
  - [–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker](#–∑–∞–ø—É—Å–∫-—á–µ—Ä–µ–∑-docker)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-api)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ü–æ–¥–¥–µ—Ä–∂–∫–∞](#-–ø–æ–¥–¥–µ—Ä–∂–∫–∞)

## üåü –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
- `/check_weather [–≥–æ—Ä–æ–¥]` - –¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞ + AI-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `/subscribe_for_weather_in_city [–≥–æ—Ä–æ–¥]` - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É (3 —Ä–∞–∑–∞/–¥–µ–Ω—å)
- `/unsubscribe_all_cities` - –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
- `/check_subscriptions` - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `/unsubscribe_concrete_city [–≥–æ—Ä–æ–¥]` - –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ–≥–æ–¥—ã –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–µ–∫
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç       | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|----------------|------------|
| –ë—ç–∫–µ–Ω–¥         | Laravel 12 |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö    | SQLite/MySQL |
| –û—á–µ—Ä–µ–¥–∏        | Redis      |
| –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫    | Laravel Scheduler |

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- [WeatherAPI](https://www.weatherapi.com/) - –î–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ
- [FusionBrain](https://fusionbrain.ai/) - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üíª –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
composer install

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
nano .env  # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
php artisan serve --port=8000

# –í –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö:
php artisan queue:work --timeout=3500
php artisan schedule:work

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok
ngrok http 8000

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞
curl -F "url=<NGROK_URL>" "https://api.telegram.org/bot<TELEGRAM_BOT_TOKEN>/setWebhook"
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
```bash
docker compose up -d

# –ü–æ–ª—É—á–∞–µ–º ngrok URL
docker compose logs ngrok --tail=100

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–µ–±—Ö—É–∫ (–∑–∞–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
curl -F "url=<NGROK_URL>" "https://api.telegram.org/bot<TELEGRAM_BOT_TOKEN>/setWebhook"
```

### ‚öô –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```ini
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
WEATHER_API_KEY=–∫–ª—é—á_weatherapi
FUSION_BRAIN_API_KEY=–∫–ª—é—á_kandinsky
FUSION_BRAIN_SECRET_KEY=—Å–µ–∫—Ä–µ—Ç_kandinsky
NGROK_AUTH_TOKEN=–≤–∞—à_ngrok_—Ç–æ–∫–µ–Ω

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é SQLite)
DB_CONNECTION=sqlite
DB_DATABASE=/–ø–æ–ª–Ω—ã–π/–ø—É—Ç—å/–∫/database.sqlite

# –û—á–µ—Ä–µ–¥–∏
QUEUE_CONNECTION=redis
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
php artisan test
```

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API 

#### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞                      | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------------------|----------|
| `/start`                     | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫—Ä–∞—Ç–∫–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π |
| `/help`                      | –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏ |
| `/check_weather [–≥–æ—Ä–æ–¥]`     | –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞:<br>‚Ä¢ –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ WeatherAPI<br>‚Ä¢ –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏–Ω–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–∞–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞<br>‚Ä¢ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ FusionBrain AI<br>‚Ä¢ –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–≥–æ–¥—ã –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è<br>‚Ä¢ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º |
| `/subscribe_for_weather_in_city [–≥–æ—Ä–æ–¥]` | –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π (3 —Ä–∞–∑–∞/–¥–µ–Ω—å) —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ–≥–æ–¥—ã:<br>‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –ë–î (chat_id + –≥–æ—Ä–æ–¥)<br>‚Ä¢ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ |
| `/unsubscribe_all_cities`    | –ü–æ–ª–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫:<br>‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º<br>‚Ä¢ –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î<br>‚Ä¢ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–º–µ–Ω—ã —Ä–∞—Å—Å—ã–ª–∫–∏ |
| `/check_subscriptions`       | –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫:<br>‚Ä¢ –ó–∞–ø—Ä–æ—Å –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –∏–∑ –ë–î<br>‚Ä¢ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ |
| `/unsubscribe_concrete_city [–≥–æ—Ä–æ–¥]` | –û—Ç–º–µ–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏:<br>‚Ä¢ –£–¥–∞–ª–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –¥–ª—è chat_id<br>‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º |

#### –í–µ–±—Ö—É–∫
POST /api/webhook - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–∞ Telegram

### üì¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞
- –ü—Ä–æ–±–ª–µ–º—ã: GitHub Issues
- –ö–æ–Ω—Ç–∞–∫—Ç—ã –≤ telegram: @the_best_bitch @KravtsovaMarina @KuroNeckojinja



